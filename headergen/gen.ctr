var Gen is Object cnew: {
  my header_set is Array new.
}.

Gen on: 'load:' do: {:path
  my header_set is File new: path, read split: '\n', fmap: {:i ^i trim findPattern: '(//.*$)|(/\\*.*?\\*/)' do: {^''.} options: ''.}, filter: {:i:v ^v length > 0.}.
}.

var path is Nil.

Program argCount > 2 ifTrue: {
  path is Program argument: 2.
}, else: {
  path is Program waitForInput trim.
}.

Gen load: path.
Gen unpack: (Map new put: 'a' at: 'header_set').

Pen write: a, brk.
